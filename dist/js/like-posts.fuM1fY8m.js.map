{"version":3,"file":"like-posts.fuM1fY8m.js","sources":["../../source/js/front/likedCounter.ts","../../source/js/front/shared.ts","../../source/js/front/share.ts","../../source/js/front/LikeModule.ts","../../source/js/front/storage/userStorage.ts","../../source/js/front/storage/localStorage.ts","../../source/js/front/like.ts","../../source/js/front/storage/likeInstancesStorage.ts","../../source/js/front/helpers/likedPostsStructurer.ts","../../source/js/front/helpers/likedPostsApiUrlBuilder.ts","../../source/js/like-posts.ts"],"sourcesContent":["import StorageInterface from \"./storage/storageInterface\";\n\nclass LikedCounter {\n    counterElements: (Element | null)[];\n    constructor(private likeStorage: StorageInterface, counterIcons: Element[]) {       \n        this.counterElements = this.addCounterToIcon(counterIcons);\n        this.updateCounter();\n    }\n\n    addCounterToIcon(counterIcons: Element[]) {\n        const icons = counterIcons.map((counterIcon: Element) => { \n            counterIcon.innerHTML += this.getLikeIconMarkup();\n            return counterIcon.querySelector('[data-js-like-counter]');\n        });\n        \n        return icons;\n    }\n\n    updateCounter() {\n        const likedPostsLength = Object.keys(this.likeStorage.get()).length;\n        \n        this.counterElements.forEach((counterElement: Element | null) => {\n            if (counterElement) {\n                counterElement.innerHTML = likedPostsLength.toString();\n            }\n\n            if (likedPostsLength === 0) {\n                counterElement?.classList.add('u-display--none');\n            } else {\n                counterElement?.classList.remove('u-display--none');\n            }\n        });\n    }\n\n    private getLikeIconMarkup() {\n        return '<span class=\"u-display--none like-counter\" data-js-like-counter></span>'\n    }\n}\n\nexport default LikedCounter;\n\nexport function initializeLikedCounter(likeStorage: StorageInterface) {\n    const counterIcons = document.querySelectorAll('[data-js-like-icon-counter]');\n    if (counterIcons.length === 0) { return };\n\n    const likeCounterInstance = new LikedCounter(likeStorage, [...counterIcons]);\n    window.addEventListener('likedPostsLengthUpdated', (e: Event) => {\n        likeCounterInstance.updateCounter();\n    });\n}","class Shared {\n    private displayNoneClass: string = 'u-display--none';\n    private nameParamKey: string = 'liked-name';\n    private excerptParamKey: string = 'liked-excerpt';\n\n    constructor(\n        private renderContainer: HTMLElement,\n        private urlParams: URLSearchParams,\n        private title: HTMLElement,\n        private excerpt: HTMLElement\n    ) {\n        this.addSharedData();\n    }\n\n    private addSharedData() {\n        let listName = this.urlParams.get(this.nameParamKey);\n        let listExcerpt = this.urlParams.get(this.excerptParamKey);\n        if (this.title && listName) {\n            this.setSharedValue(this.title, listName);\n        }\n\n        if (this.excerpt && listExcerpt) {\n            this.setSharedValue(this.excerpt, listExcerpt);\n        }\n    }\n\n    private setSharedValue(element: HTMLElement, value: string) {\n        element.textContent = this.sanitizeUrlParams(value);\n        element.classList.remove(this.displayNoneClass);\n    }\n\n    private sanitizeUrlParams(encodedString: string) {\n\t\tlet string = atob(encodedString);\n\t\tstring = string.replace(/(<([^>]+)>)/gi, '');\n\t\treturn string;\n\t}\n}\n\nexport default Shared;","import LikedPostsApiUrlBuilder from './helpers/likedPostsApiUrlBuilder';\nimport LikedPostsStructurer from './helpers/likedPostsStructurer';\nimport StorageInterface from './storage/storageInterface';\n\nclass Share {\n    private sharedParamKey: string = 'liked-posts';\n    private displayNoneClass: string = 'u-display--none';\n\n    constructor(\n        private likeStorage: StorageInterface,\n        private postTypesToShow: string[],\n        private postAppearance: string,\n        private likedPostsStructurer: LikedPostsStructurer,\n        private likedPostsApiUrlBuilder: LikedPostsApiUrlBuilder,\n        private shareButton: HTMLButtonElement,\n        private urlField: HTMLInputElement,\n        private nameField: HTMLInputElement,\n        private excerptField: HTMLInputElement,\n    ) {        \n        const urlParams = new URLSearchParams(window.location.search);\n\n        const encodedLikedPosts = urlParams.get(this.sharedParamKey);\n\n        if (!encodedLikedPosts) {\n            this.renderShareLink();\n        }\n    }\n\n    private renderShareLink() {\n        const url = window.location.href.split('?')[0];\n        const encodedLikedPostsParam = this.generateEncodedLikedPostsParam();\n\n        if (!encodedLikedPostsParam) return;\n\n        const shareLink = `${url}${encodedLikedPostsParam}`;\n\n        this.urlField.value = shareLink;\n        this.nameField.addEventListener('input', this.updateShareLink.bind(this, this.urlField, this.nameField, this.excerptField));\n        this.excerptField.addEventListener('input', this.updateShareLink.bind(this, this.urlField, this.nameField, this.excerptField));\n\n        this.shareButton.classList.remove(this.displayNoneClass);\n    }\n\n    private generateEncodedLikedPostsParam() {\n        const likedPosts = this.likeStorage.get();\n        if (Object.keys(likedPosts).length == 0) {\n            return false;\n        }\n\n        const apiUrls = this.likedPostsApiUrlBuilder.build(\n            likedPosts,\n            this.postAppearance,\n            this.postTypesToShow\n        );\n\n        const encodedApiUrls = btoa(JSON.stringify(apiUrls));\n    \n        return '?liked-posts=' + encodedApiUrls;\n    }\n\n    private updateShareLink(urlField: HTMLInputElement, nameField: HTMLInputElement, excerptField: HTMLInputElement) {\n        const newName = btoa(nameField.value);\n        const newExcerpt = btoa(excerptField.value);\n        const url = new URL(urlField.value);\n\n        if (url) {\n            url.searchParams.set('liked-name', newName);\n            url.searchParams.set('liked-excerpt', newExcerpt);\n\n            if (!newName) {\n                url.searchParams.delete('liked-name');\n            }\n\n            if (!newExcerpt) {\n                url.searchParams.delete('liked-excerpt');\n            }\n        }\n\n        urlField.value = url.href;\n    }\n}\n\nexport default Share;","import LikedPostsApiUrlBuilder from \"./helpers/likedPostsApiUrlBuilder\";\nimport LikedPostsStructurer from \"./helpers/likedPostsStructurer\";\nimport { LikedPostsMeta, LikedPosts, WpApiSettings } from \"./like-posts\";\nimport StorageInterface from \"./storage/storageInterface\";\n\nclass LikeModule {\n    private displayNoneClass: string = 'u-display--none';\n    private likedPosts: LikedPostsMeta;\n\tconstructor(\n        private wpApiSettings: WpApiSettings,\n        private likeStorage: StorageInterface,\n        private sharedPosts: string|null,\n        private likedPostsStructurer: LikedPostsStructurer,\n        private likedPostsApiUrlBuilder: LikedPostsApiUrlBuilder,\n        private postTypesToShow: Array<string>,\n        private postAppearance: string,\n        private renderContainer: HTMLElement,\n        private noPostsNotice: HTMLElement,\n        private preLoaders: NodeListOf<HTMLElement>,\n\n    ) {\n        this.likedPosts = this.likeStorage.get();\n        if (this.sharedPosts) {\n            const decodedSharedPosts = atob(this.sharedPosts);\n            const apiUrl = JSON.parse(decodedSharedPosts);\n\n            if (typeof apiUrl === 'string' && apiUrl.length > 0) {\n                this.fetchPosts(apiUrl);\n            } else {\n                console.error('Invalid shared posts data:', this.sharedPosts);\n                this.noPostsFound();\n            }\n        } else {\n            this.handleLikedPosts();\n        }\n    }\n\n\tprivate handleLikedPosts(): void {\n        if (Object.keys(this.likedPosts).length <= 0) {\n            this.noPostsFound();\n            return;\n        }\n\n        const apiUrl = this.likedPostsApiUrlBuilder.build(\n            this.likedPosts,\n            this.postAppearance,\n            this.postTypesToShow\n        );\n\n        this.fetchPosts(apiUrl);\n\t}\n\n    private fetchPosts(apiUrl: string): void {\n        fetch(\n            apiUrl,\n            {\n                credentials: 'include',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'X-WP-NONCE': this.wpApiSettings?.nonce ?? '',\n                }\n            }\n        )\n            .then(response => {\n                if (!response.ok) {\n                    throw new Error('Failed to fetch post');\n                }\n                return response.json();\n            })\n            .then(postsMarkup => {\n                this.handleFetched(postsMarkup);\n            })\n            .catch(error => {\n                console.error('Fetch error:', error);\n                this.noPostsFound();\n            });\n    }\n\n\n    private handleFetched(posts: string): void {\n        if (!posts || typeof posts !== 'string') {\n            this.noPostsFound();\n            return;\n        }\n\n        this.removePreloaders();\n        this.renderContainer.innerHTML = posts;\n    }\n\n    private removePreloaders() {\n        this.preLoaders.forEach((preloader) => {\n            preloader.remove();\n        });\n    }\n\n    private noPostsFound() {\n        this.noPostsNotice.classList.remove(this.displayNoneClass);\n        this.removePreloaders();\n    }\n}\n\nexport default LikeModule;\n","import { LikedPostsMeta, LikedPosts, WpApiSettings } from \"../like-posts\";\nimport StorageInterface from \"./storageInterface\";\n\ndeclare const wpApiSettings: any;\n\nclass UserStorage implements StorageInterface {\n    private likedPosts: LikedPostsMeta = {};\n    private userEndpoint: string = '';\n\n    constructor(\n        private wpApiSettings: WpApiSettings,\n        private userId: number,\n        likedPostsMeta: any\n    ) {\n        this.userEndpoint = `${this.wpApiSettings.root}wp/v2/users/${this.userId}`;\n        this.likedPosts = this.sanitizeLikedPostsMeta(likedPostsMeta);\n    }\n\n    public get(): LikedPostsMeta {\n        return this.likedPosts;\n    }\n\n    public set(postId: string, postType: string, blogId: string): void {\n        const key = `${blogId}-${postId}`;\n        const runtimeLikedPosts = this.get();\n\n        if (runtimeLikedPosts[key]) {\n            delete runtimeLikedPosts[key];\n        } else {\n            runtimeLikedPosts[key] = {\n                postType: postType,\n                blogId: blogId,\n                postId: postId,\n                likedAt: Date.now(),\n                website: this.wpApiSettings.root\n            };\n        }\n\n        fetch(this.userEndpoint, {\n            method: 'PATCH',\n            headers: {\n                'Content-Type': 'application/json',\n                'X-WP-NONCE': wpApiSettings?.nonce ?? '',\n            },\n            body: JSON.stringify({\n                meta: {\n                    likedPosts: runtimeLikedPosts\n                }\n            }),\n        })\n            .then(response => {\n                if (!response.ok) {\n                    throw new Error('Failed to update user data');\n                }\n                return response.json();\n            })\n            .catch(error => {\n                console.error('Error:', error);\n            });\n    }\n\n   private sanitizeLikedPostsMeta(likedPostsMeta: any): LikedPostsMeta {\n        if (!likedPostsMeta || typeof likedPostsMeta !== 'object') return {};\n\n        return Object.fromEntries(\n            Object.entries(likedPostsMeta).filter(([_, value]) =>\n                value &&\n                typeof value === 'object' &&\n                'postId' in value &&\n                'blogId' in value &&\n                'postType' in value &&\n                'likedAt' in value\n            )\n        ) as LikedPostsMeta;\n    }\n}\n\nexport default UserStorage;","import { LikedPostsMeta, LikedPosts, WpApiSettings } from \"../like-posts\";\nimport StorageInterface from \"./storageInterface\";\n\nclass LocalStorage implements StorageInterface {\n\tprivate localeStorageKey: string = 'liked-posts-v2';\n\tprivate likedPosts: LikedPostsMeta;\n\n\tconstructor(\n\t\tprivate wpApiSettings: WpApiSettings,\n\t\tprivate currentBlogId: string\n\t) {\n\t\tthis.likedPosts = this.sanitizeLikedPosts(JSON.parse(localStorage.getItem(this.localeStorageKey) || '{}'));\n\t}\n\n    public get(): LikedPostsMeta {\n        return this.likedPosts;\n    }\n\n    public set(postId: string, postType: string, blogId: string): void {\n\t\tlet likedPostsIds = this.get();\n\t\tconst key = `${blogId}-${postId}`;\n\n\t\tif (likedPostsIds[key]) {\n\t\t\tdelete likedPostsIds[key];\n\t\t} else {\n\t\t\tlikedPostsIds[key] = {\n\t\t\t\tpostType: postType,\n\t\t\t\tblogId: blogId,\n\t\t\t\tpostId: postId,\n\t\t\t\tlikedAt: Date.now(),\n\t\t\t\twebsite: this.wpApiSettings.root\n\t\t\t};\n\t\t}\n\n\t\tlocalStorage.setItem(this.localeStorageKey, JSON.stringify(likedPostsIds));\n\t\tthis.likedPosts = likedPostsIds;\n\t}\n\n\t// Sanitizes how old liked posts are stored in local storage.\n\t// This is for backwards compatibility with older versions of the plugin.\n\tprivate sanitizeLikedPosts(likedPosts: LikedPosts|LikedPostsMeta): any {\n\n\t\tconst localLikedPosts: LikedPostsMeta = {};\n\t\tfor (const id in likedPosts) {\n\t\t\tif (typeof likedPosts[id] !== 'string') {\n\t\t\t\tlocalLikedPosts[id] = likedPosts[id];\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst key = `${this.currentBlogId}-${id}`;\n\n\t\t\tlocalLikedPosts[key] = {\n\t\t\t\tpostType: likedPosts[id],\n\t\t\t\tblogId: this.currentBlogId,\n\t\t\t\tpostId: id,\n\t\t\t\tlikedAt: Date.now(),\n\t\t\t\twebsite: this.wpApiSettings.root\n\t\t\t}\n\t\t}\n\n\t\treturn localLikedPosts;\n\t}\n}\n\nexport default LocalStorage;","import StorageInterface from \"./storage/storageInterface\";\nimport LikeInstancesStorage from \"./storage/likeInstancesStorage\";\n\nconst likeIconSelector: string = '[data-like-icon]';\nconst likedIconClass: string = 'material-symbols--filled';\nconst postIdAttribute: string = 'data-post-id';\nconst postTypeAttribute: string = 'data-post-type';\nconst blogIdAttribute: string = 'data-blog-id';\nconst tooltipAttribute: string = 'data-tooltip';\nconst iconWrapperAttribute: string = 'data-js-like-icon-wrapper';\n\nexport default class Like {\n    private hasTooltip: boolean;\n    private key: string;\n    constructor(\n        private likeStorage: StorageInterface,\n        private likeInstancesStorage: LikeInstancesStorage,\n        private button: Element,\n        private wrapper: Element|null,\n        private postId: string,\n        private postType: string,\n        private tooltipLike: string,\n        private tooltipUnlike: string,\n        private blogId: string\n    ) {\n        this.key = `${this.blogId}-${this.postId}`;\n        this.hasTooltip = Boolean(this.wrapper && (!!this.tooltipLike || !!this.tooltipUnlike));\n        this.updateLikedStatus();\n        this.setTooltip();\n        this.setListener();\n    }\n\n    // Sets the event listener for the like button\n    private setListener() {\n        this.button.addEventListener('click', (e) => {\n            e.preventDefault();\n            e.stopPropagation();\n            this.likeStorage.set(this.postId, this.postType, this.blogId);\n            this.toggleLiked();\n            window.dispatchEvent(this.likedPostsUpdatedEvent());\n        });\n    }\n\n    // Sets the tooltip for the like button\n    private setTooltip() {\n        if (!this.hasTooltip) {\n            return;\n        }\n\n        const isLiked = this.likeStorage.get()[this.key];\n\n        if (isLiked) {\n            if (this.tooltipUnlike) {\n                this.wrapper!.setAttribute(tooltipAttribute, this.tooltipUnlike);\n            } else {\n                this.wrapper!.removeAttribute(tooltipAttribute);\n            }\n        } else {\n            if (this.tooltipLike) {\n                this.wrapper!.setAttribute(tooltipAttribute, this.tooltipLike);\n            } else {\n                this.wrapper!.removeAttribute(tooltipAttribute);\n            }\n        }\n    }\n\n    // Toggles the like button (liked/not liked) and updates all like buttons with the same postId\n    private toggleLiked() {\n        this.likeInstancesStorage.getInstances(this.key).forEach((instance) => {\n            instance.updateLikedStatus();\n            instance.setTooltip();\n        });\n\t}\n\n    // Updates the state of the like button (liked/not liked)\n    public updateLikedStatus() {\n        const isLiked = this.likeStorage.get()[this.key];\n        \n        if (isLiked) {\n            this.button.classList.add(likedIconClass);\n        } else {\n            this.button.classList.remove(likedIconClass);\n        }\n    }\n\n    // Custom event to update liked posts length\n    public likedPostsUpdatedEvent() { \n\t\treturn new CustomEvent('likedPostsLengthUpdated', {});\n    }\n}\n\n// Initialize like buttons/icons\nexport function initializeLikeButtons(\n    likeStorage: StorageInterface,\n    likeInstancesStorage: LikeInstancesStorage,\n    tooltipLike: string, \n    tooltipUnlike: string\n) {\n    const createLikeInstance = (button: Element) => {\n        const postId   = button.getAttribute(postIdAttribute);\n        const postType = button.getAttribute(postTypeAttribute);\n        const blogId   = button.getAttribute(blogIdAttribute)\n\n        if (!postId || !postType || !blogId) {\n            console.warn('Like button is missing required blogId for likeable post', button);\n            return;\n        }\n\n        const wrapper = button.closest(`[${iconWrapperAttribute}]`);\n\n        likeInstancesStorage.addInstance(\n            `${blogId}-${postId}`,\n            new Like(\n                likeStorage, \n                likeInstancesStorage, \n                button,\n                wrapper,\n                postId, \n                postType, \n                tooltipLike, \n                tooltipUnlike,\n                blogId\n            )\n        );\n    };\n\n    document.querySelectorAll(likeIconSelector).forEach((button) => {\n        createLikeInstance(button);\n    });\n\n    const observer = new MutationObserver((mutations) => {\n        mutations.forEach((mutation) => {\n            if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {\n                [...mutation.addedNodes].forEach((node) => {\n                    if (node.nodeType === Node.ELEMENT_NODE) {\n                        const element = node as Element;\n    \n                        if (element.matches(likeIconSelector)) {\n                            createLikeInstance(element);\n                        }\n    \n                        element.querySelectorAll(likeIconSelector).forEach((button) => {\n                            createLikeInstance(button);\n                        });\n                    }\n                });\n            }\n        });\n    });\n    \n    observer.observe(document.body, { childList: true, subtree: true });\n}","import Like from '../like';\n\ninterface LikeInstancesStorageInterface {\n    [postId: string]: Like[];\n}\n\nclass LikeInstancesStorage {\n    private instances: LikeInstancesStorageInterface = {};\n\n    // Returns all instances of a like button with a given postId\n    public getInstances(postId: string): Like[] {\n        return this.instances[postId] || [];\n    }\n\n    // Adds a new instance of a like button with a given\n    public addInstance(postId: string, likeInstance: Like): void {\n        if (!this.instances[postId]) {\n            this.instances[postId] = [];\n        }\n\n        this.instances[postId].push(likeInstance);\n    }\n}\n\nexport default LikeInstancesStorage;\n\n","import { LikedPostsMeta, StructuredLikedPosts } from \"../like-posts\";\n\nclass LikedPostsStructurer {\n    public structure(likedPosts: LikedPostsMeta): StructuredLikedPosts {\n        const strucuturedLikedPosts: StructuredLikedPosts = {};\n        for (const id in likedPosts) {\n            if (!strucuturedLikedPosts[likedPosts[id].website]) {\n                strucuturedLikedPosts[likedPosts[id].website] = [];\n            }\n\n            strucuturedLikedPosts[likedPosts[id].website].push(likedPosts[id]);\n        }\n\n        return strucuturedLikedPosts;\n    }\n}\n\nexport default LikedPostsStructurer;","import { LikedPostMeta, LikedPostsMeta, WpApiSettings } from \"../like-posts\";\n\nclass LikedPostsApiUrlBuilder {\n    constructor(private wpApiSettings: WpApiSettings) {}\n\n    public build(likedPosts: LikedPostsMeta, appearance: string, postTypes?: string[]): string {\n        let postIds: string[] = [];\n        for (const postId in likedPosts) {\n            if (!postTypes || postTypes.includes(likedPosts[postId].postType)) {\n                postIds.push(postId);\n            }\n        }\n\n        return `${this.wpApiSettings.root}like/v1/ids=${postIds.join(',')}?html&appearance=${appearance}&cache-bust=${Date.now()}`;\n    }\n}\n\nexport default LikedPostsApiUrlBuilder;","import { initializeLikedCounter } from \"./front/likedCounter\";\nimport Shared from './front/shared';\nimport Share from './front/share';\nimport LikeModule from './front/LikeModule';\nimport { LikedPostsMeta, LikedPosts, WpApiSettings } from './front/like-posts';\nimport UserStorage from './front/storage/userStorage';\nimport LocalStorage from './front/storage/localStorage';\nimport { initializeLikeButtons } from './front/like';\nimport LikeInstancesStorage from \"./front/storage/likeInstancesStorage\";\nimport LikedPostsStructurer from \"./front/helpers/likedPostsStructurer\";\nimport LikedPostsApiUrlBuilder from \"./front/helpers/likedPostsApiUrlBuilder\";\n\ndeclare const likedPosts : {\n    currentUser: number|string,\n    likedPostsMeta: any,\n    tooltipLike: string,\n    tooltipUnlike: string,\n    currentBlogId: string\n};\n\ndeclare const wpApiSettings: WpApiSettings;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const localWpApiSettings = wpApiSettings;\n\n    const likeStorage = likedPosts && likedPosts.currentUser && likedPosts.currentUser !== '0' && likedPosts.likedPostsMeta && localWpApiSettings ?\n        new UserStorage(localWpApiSettings, likedPosts.currentUser as number, likedPosts.likedPostsMeta) :\n        new LocalStorage(localWpApiSettings, likedPosts.currentBlogId);\n\n    const tooltipLike: string = likedPosts.tooltipLike;\n    const tooltipUnlike: string = likedPosts.tooltipUnlike;\n\n    initializeLikedCounter(likeStorage);\n    initializeLikeButtons(\n        likeStorage, \n        new LikeInstancesStorage(), \n        tooltipLike, \n        tooltipUnlike\n    );\n\n    document.querySelectorAll('[data-js-like-posts]').forEach((likePostsContainer) => {\n        const postTypesToShow   = JSON.parse(likePostsContainer.getAttribute('data-js-like-posts-post-types') || '[]');\n        const postAppearance    = likePostsContainer.getAttribute('data-js-like-posts-appearance') || 'collection';\n        const renderContainer   = likePostsContainer.querySelector('[data-js-render-container]');\n        const noPostsNotice     = likePostsContainer.querySelector('[data-js-no-posts-notice]');\n        const preLoaders        = likePostsContainer.querySelectorAll('[data-js-like-preloader]');\n        const sharedTitle       = likePostsContainer.querySelector('[data-js-liked-posts-share-title]');\n        const sharedExcerpt     = likePostsContainer.querySelector('[data-js-liked-posts-share-excerpt]');\n        const shareUrlField     = likePostsContainer.querySelector('[data-js-like-share-url]');\n        const shareListField    = likePostsContainer.querySelector('[data-js-like-share-name]');\n        const shareExcerptField = likePostsContainer.querySelector('[data-js-like-share-excerpt]');\n        const shareButton       = likePostsContainer.querySelector('[data-js-like-share-button]');\n\n        const urlParams = new URLSearchParams(window.location.search);\n\t\tconst sharedPosts = urlParams.get('liked-posts');\n\n        const likedPostsStructurer = new LikedPostsStructurer();\n        const likedPostsApiUrlBuilder = new LikedPostsApiUrlBuilder(wpApiSettings);\n\n        if (postTypesToShow && renderContainer && noPostsNotice && preLoaders) {\n            if (sharedPosts) {\n                new Shared(\n                    renderContainer as HTMLElement,\n                    urlParams, \n                    sharedTitle as HTMLElement, \n                    sharedExcerpt as HTMLElement\n                );\n            }\n\n            new LikeModule(\n                wpApiSettings,\n                likeStorage,\n                sharedPosts,\n                likedPostsStructurer,\n                likedPostsApiUrlBuilder,\n                postTypesToShow,\n                postAppearance,\n                renderContainer as HTMLElement,\n                noPostsNotice as HTMLElement,\n                preLoaders as NodeListOf<HTMLElement>,\n            );\n        }\n\n        if (shareButton && shareUrlField && shareListField && shareExcerptField) {\n            new Share(\n                likeStorage,\n                postTypesToShow,\n                postAppearance,\n                likedPostsStructurer,\n                likedPostsApiUrlBuilder,\n                shareButton as HTMLButtonElement,\n                shareUrlField as HTMLInputElement,\n                shareListField as HTMLInputElement,\n                shareExcerptField as HTMLInputElement\n            );\n        }\n    });\n});\n"],"names":["likedPosts","wpApiSettings"],"mappings":"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"}